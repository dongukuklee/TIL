## 성공적인 프로그래밍이란?

- 좋은 프로그램을 만드는 일
- 사용성, 성능, 확장성, 기획 변경에 대한 적용력 등이 좋다.

함수형 프로그래밍은 이런 성공적인 프로그래밍을 위해 부수효과를 미워하고 조합성을 강조하는 프로그래밍 패러다임이다.

부수효과를 미워한다 -> 순수 함수를 만든다.

### 순수 함수란?

- 들어오는 인자가 같으면 항상 동일한 결과를 리턴한다.
- 함수가 받는 인자 외에 다른 외부의 상태에 영향을 끼치지 않는다.
- 리턴 값 외에는 외부와 소통하는 것이 없다.

## 함수형 프로그래밍

함수형 프로그래밍은 조합성을 강조한다.

조합성을 강조한다 -> 모듈화 수준을 높인다.

모듈화 수준을 높이면

- 적은 오류
- 높은 안정성
- 높은 생산성

## 순수함수, 일급함수

### 순수 함수의 예

```jsx
function add(a, b) {
  return a + b;
}

console.log(add(10, 5));
console.log(add(10, 5));
console.log(add(10, 5));
```

위 add 함수는 순수 함수이다 그 이유는

- 항상 동일한 인자를 주면, 동일한 결과를 리턴한다.
- 부수효과(Side Effect)가 없다
  - 부수효과: 함수가 return 값으로 결과를 만드는 것 외에 외부의 상태에 영향을 끼치는 것

### 순수 함수가 아닌 예

1. 항상 동일한 값을 리턴할 수 없을 때

```jsx
let c = 10;
function add2(a, b) {
  return a + b + c;
}

console.log(add2(10, 4)); //24
console.log(add2(10, 5)); //25
console.log(add2(10, 6)); //26
c = 20;

console.log(add(10, 4)); //34
console.log(add(10, 5)); //35
console.log(add(10, 6)); //36
```

위 add2함수 에서 변수 c가 프로그램이 동작하는 상황에서 변화가 있을 수 있다고 가정한다면 add2는 순수함수가 아니게 된다.

하지만 c가 항상 동일한 값인 상수로써 존재하게 된다면 add2도 순수함수가 된다.

2. 부수 효과를 일으킬 때

```jsx
let c = 20;
function add3(a, b) {
  c = b;
  return a + b;
}
console.log(c); //20
console.log(add3(20, 30)); //50
console.log(add3(20, 30)); //50
console.log(c); //30
```

add 3 는 항상 동일한 값을 return 하지만 외부 변수인 c의 값을 변경시킨다.

#### 부수 효과란

- 부수효과는 외부에 상태를 변경하는 것
- 들어오는 인자의 상태를 변경하는 함수.

```jsx
let obj1 = { val: 10 };
function add4(obj, b) {
  obj.val += b;
}

console.log(obj1.val); //10
add4(obj, 20);
console.log(obj1.val); //30
```

위 함수는 순수 함수도 아니고 이 함수를 실행하면 인자로 들어온 obj를 직접 변경하고 있다.

데이터를 다룰 때 숫자, 문자 보다는 객체를 많이 다르게 된다.
그렇다면 순수 함수는 객체 상태를 변경할 수 없는가?
순수 함수를 사용하는 함수형 프로그래밍에선 이런 객체를 다룰 수 없는가?

함수형 프로그래밍에선 객체의 값들을 변형해 나가는데에 조금 다른 방법을 사용한다.

원래 있던 값들을 그대로 놔두고 기본의 값을 복사해서 새로운 값을 만들면서 원하는 부분의 값을 변형된 값으로 return 하는 방식을 사용한다.

#### add4와 동일한 역할을 하지만 외부 데이터에 영향을 끼치지 않는 함수

(다시 순수 함수)

```jsx
let obj2 = { val: 10 };

function add5(obj, b) {
  return { val: obj.val + b };
}
```

add5는 obj의 값을 참조만 할 뿐 직접 값을 변경하지는 않는다.
그리고 obj와 동일하게 생긴 { val:obj.val+b}라는 값을 return 한다.

순수 함수는 값을 변경할 때 초기화 되어있는 값을 변경하지 않고 모든 값들에 대해 변화를 일으키지 않고 인자를 받은 값을 직접 변경시키지 않으면서 값을 다뤄나가는 프로그래밍이다.

### 순수 함수의 평가 시점.

순수 함수는 평가 시점이 중요하지 않다. 이는 함수형 프로그래밍이 가능한 굉장이 중요한 이유이기도 하고, 함수형 프로그래밍에서 아주 중시하는 개념이다.

위 예에서 add2라는 함수는 또다른 외부값을 참조하기 떄문에 동일한 인자를 준다고 항상 동일한 결과를 리턴하지 않는 그런 함수 이다.

add2 함수는 어느 타이밍에 10,2 라는 인자를 적용시켰는가에 따라서 22,32를 리턴할 떄도 있는 함수이다.

- c가 변경되기 전에 평가 했느냐 변경된 후 평가 했느냐에 따라 값이 달라지므로 순수 함수가 아닌 함수는 평가 시점이 중요하고 그 시점에 따라 로직이 정해지게 된다.

반대로 순수함수는 언제 실행해도 동일한 결과를 리턴하므로
순수 함수가 아닌 함수보다 조합성을 강조 시킬 수 있다.

(순수 함수를 항상 동일한 결과를 리턴하기 때문에 안전하고 다루기 쉬운 함수가 된다.)
